{% extends "base.html" %}

{% block content %}
<style>
.type-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    display: inline-block;
}
.type-badge.income {
    background: #d4edda;
    color: #155724;
}
.type-badge.expense {
    background: #f8d7da;
    color: #721c24;
}
</style>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h2 style="margin: 0;">All Transactions</h2>
    <a href="/add_transaction" class="btn btn-primary">+ Add New Transaction</a>
</div>

{% if transactions %}
<div class="card">
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Category</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transactions %}
            <tr>
                <td>{{ transaction.date.strftime('%Y-%m-%d') }}</td>
                <td>
                    <span style="padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600; background: {{ '#d4edda' if transaction.type == 'income' else '#f8d7da' }}; color: {{ '#155724' if transaction.type == 'income' else '#721c24' }};">
                        {{ transaction.type.title() }}
                    </span>
                </td>
                <td>{{ transaction.category.name }}</td>
                <td>{{ transaction.description or '-' }}</td>
                <td class="{{ transaction.type }}" style="font-size: 1.1rem;">
                    {{ '+' if transaction.type == 'income' else '-' }}â‚¹{{ "%.2f"|format(transaction.amount) }}
                </td>
                <td>
                    <a href="/delete_transaction/{{ transaction.id }}" 
                       class="btn btn-danger" 
                       onclick="return confirm('Are you sure you want to delete this transaction?')">
                        Delete
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 2rem; padding-top: 1rem; border-top: 2px solid #e0e0e0;">
        <p style="text-align: right; color: #6c757d; font-size: 0.95rem;">
            Total Transactions: <strong>{{ transactions|length }}</strong>
        </p>
    </div>
</div>
{% else %}
    <div style="text-align: center; padding: 3rem;">
        <p style="color: #6c757d; font-size: 1.1rem; margin-bottom: 1.5rem;">
            No transactions found. Start tracking your finances!
        </p>
        <a href="/add_transaction" class="btn btn-primary">Add Your First Transaction</a>
    </div>
{% endif %}

{% endblock %}
